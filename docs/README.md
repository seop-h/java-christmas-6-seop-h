# 크리스마스 프로모션 미션 진행

## 1. 미션 진행 계획
### 1) 패키지 구성
- 크게 도메인 로직을 담고 있는 `domain`패키지, UI 로직을 담고 있는 `ui`패키지,
  도메인 로직과 UI 로직을 적절하게 제어하는 `controller`패키지로 나눈다.
- `domain` &rarr; `ui` &rarr; `controller` 순으로 구현한다.
- 어떤 코드가 도메인 로직인지 아닌지 애매하다면, 그 코드가 '크리스마스 프로모션'이라는 비즈니스 문제에 대해서
  의미있는 결정을 하고 있는지를 파악하자. 이 외의 다른 모든 것들은 해당 결정을 해석하거나
  아니면 그 결정을 내리는 데 필요한 입출력과 관련되어 있을 뿐이다.

### 2) 테스트 코드 작성
- 테스트 코드는 도메인 로직이 완성된 뒤 작성한다. 도메인 로직을 작성하다가
  변경사항이 생길수도 있기 때문이다.
- 도메인 로직 위주로 단위 테스트를 구현한다.
- 특히 예외 상황을 잘 생각해서 적절한 테스트 코드를 구현한다. (경계값 부분도 꼼꼼히 살피기)
- 계산 후 도출되는 값(할인 전, 할인, 할인 후 금액 등)이 모두 정확한지 또한 테스트 코드로 확실히 확인한다.

### 3) 입력값 처리
1. Controller 부분에 do while문으로 입력 관련 메서드 호출
2. do while 조건문에서 입력값이 올바른지 확인하는 메서드 호출(이 메서드 역시 Controller 부분)
3. 이 메서드는 try catch로 구현해 try 부분에서 입력값을 저장 또는 처리하는 기능을 하는 domain 관련 메서드 호출
   1. 정상적으로 처리되면 false를 반환해 while문을 빠져나와 controller의 다음 부분으로 이동
   2. 처리하다가 예외가 발생하면 catch 부분에서 에러 관련 UI 메서드를 호출하고 true 반환
       - do while문의 조건문에서 true를 받음
       - 1번으로 이동

### 4) 검증 로직의 적절한 위치
- 검증 로직을 꼭 한 계층에 몰아넣을 필요는 없다.
- 여러가지 검증 로직 중에, 도메인 부분에서 검증하면 좋을 내용과 컨트롤러 부분에서 검증하면 좋을 내용을 잘 고민해서 분류한다.
- 입력값을 원하는 자료형(int, Map<String, Integer> 등)으로 변환할 수 있는지는 컨트롤러 부분에서 확인하고, 
  그 변환된 값들이 비즈니스 로직에서 정한 규칙(날짜 1~31 이내의 수, 메뉴 존재여부나 중복 불가 등)을 따르는지는 
  도메인 로직에서 확인한다. 
- 도메인 로직에서도 특정 검증 로직을 생성자에 넣을지, 서비스 단에 넣을지 등을 잘 고민해서 판단한다.

### 5) 객체 분리
- 서비스 클래스와 컨트롤러 클래스도 하나만 만들 필요는 없다.
- 해당 서비스나 컨트롤러가 무슨 일을 하는지 판단해서 적절히 역할과 책임애 따라 나눈다.
- 참고 자료
  - [[우아한 테크 코스 5기] 여러분은 MVC에 대해서 얼마나 알고 계신가요?](https://heesangstudynote.tistory.com/108)

### 6) getter
- 우선 모든 기능을 구현할 때까지는 getter를 중점적으로 사용한다.
- 이후 리팩토링을 할 때 getter를 쓰지 않으면서 객체를 객체답게 사용할 방법을 고민한다.
- 참고 자료
  - [getter를 사용하는 대신 객체에 메시지를 보내자](https://tecoble.techcourse.co.kr/post/2020-04-28-ask-instead-of-getter/) (3주차 피드백에서 제공)


## 2. 구현할 기능 목록
### 1) 도메인 로직
- [x] 예상 방문 날짜를 생성한다. `new Date()`
  - 👿 날짜가 1 이상 31 이하의 숫자가 아니면 예외처리
- [x] 주문 메뉴와 개수를 생성한다. `Order.create()`
  - 👿 매뉴판에 없는 메뉴이면 예외처리
  - 👿 메뉴 개수가 1 이상의 숫자가 아니면 예외처리
- [x] 예상 방문 날짜와 주문 메뉴 리스트를 저장한다. `new Reservation()`
  - 👿 음료만 주문할 경우 예외처리
  - 👿 메뉴 총 개수가 20개를 넘어서면 예외처리
- [x] 날짜와 메뉴에 따라 이벤트를 적용한다. `applyEvent()`
  - [x] 크리스마스 디데이 할인을 적용한다. `applyChristmasDDay()`
  - [x] 주말 할인(금~일)을 적용한다.`applyEitherOne()` &rarr; `applyWeekend()`
  - [x] 평일 할인(일~목)을 적용한다. `applyEitherOne()` &rarr; `applyWeekday()`
  - [x] 특별 할인을 적용한다. `applySpecial()`
  - [x] 증정 이벤트를 적용한다. `applyGiveaway()`
- [x] 총혜택 금액에 따라 다른 이벤트 배지를 부여한다. `giveBadge()`

### 2) UI 로직
- [x] 예상 방문 날짜를 입력받는다. `readDate()`
- [x] 주문 메뉴와 개수를 입력받는다. `readMenu()`

- [x] 주문 메뉴를 출력한다. `printMenu()`
- [x] 할인 전 총주문 금액을 출력한다. `printAmountBeforeDiscount()`

- [x] 증정 메뉴를 출력한다. `printGiveawayMenu()`
- [x] 혜택 내역을 출력한다. `printEventDetails()`
- [x] 총헤택 금액을 출력한다. `printTotalBenefitAmount()`
- [x] 할인 후 예상 결제 금액을 출력한다. `printAmountAfterDiscount()`
- [x] 이벤트 배지를 출력한다. `printBadge()`

- [x] 이벤트가 적용되지 않을 때 '없음' 출력 `printNothing()`

### 3) 컨트롤러 로직
- [x] 입력받은 예약 정보를 예약 정보 생성 도메인 로직으로 넘긴다. `initReservation()`
  - [x] 입력받은 날짜를 int 타입 정수로 변환한다. `initDate()`, `toInt()` 
    - 👿 날짜를 int 타입으로 변환할 수 없으면 예외처리
  - [x] 입력받은 주문 메뉴와 개수를 Map 컬렉션으로 변환한다. `initOrders()`, `toMap()`
    - 👿 개수를 int 타입으로 변환할 수 없으면 예외처리 
    - 👿 메뉴 형식이 규칙과 다르면 예외처리
    - 👿 중복된 메뉴 이름이 있으면 예외처리
- [x] 주문 메뉴를 사용자에게 보여준다. `showAllOrderMenu()`
- [x] 할인 전 금액을 사용자에게 보여준다. `ㄴshowTotalAmountBeforeDiscount()`
- [x] 이벤트를 적용한 내역을 사용자에게 보여준다. `showAppliedEvent()`
- [x] 부여된 이벤트 뱃지를 사용자에게 보여준다. `showBadge()`

- [ ] 예외 상황이 생기면 해당 부분부터 다시 입력받는다.
  - [미션 진행 계획-입력값 처리](#3-입력값-처리) 참고